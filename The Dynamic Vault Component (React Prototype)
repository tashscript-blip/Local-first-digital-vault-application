import React, { useState } from 'react';
import { Plus, Trash2, Save, ShieldCheck, Download } from 'lucide-react';
// CORE PHILOSOPHY: The UI adapts to the user's volume of data.
// We do not limit them to 10 lines. We give them infinite scale.
const VaultSection = ({ title, subtitle, children }) => (
 <div className="mb-8 border border-slate-200 rounded-lg overflow-hidden shadow-sm">
 <div className="bg-slate-50 p-4 border-b border-slate-200">
 <h2 className="text-xl font-bold text-slate-800">{title}</h2>
 {subtitle && <p className="text-sm text-slate-500 mt-1">{subtitle}</p>}
 </div>
 <div className="p-6 bg-white">
 {children}
 </div>
 </div>
);
const DynamicTable = ({ headers, data, onAdd, onRemove, onChange, placeholder }) => {
 return (
 <div className="w-full overflow-x-auto">
 <table className="w-full text-left text-sm text-slate-600"> 
<thead className="bg-slate-100 text-slate-900 uppercase font-semibold">
 <tr>
 {headers.map((h, i) => (
 <th key={i} className="px-4 py-3">{h}</th> 
))}
 <th className="px-4 py-3 w-16">Action</th>
 </tr>
 </thead>
 <tbody className="divide-y divide-slate-100">
 {data.map((row, rowIndex) => (
 <tr key={row.id} className="hover:bg-slate-50 transition-colors">
 {Object.keys(row).filter(k => k !== 'id').map((key, colIndex) => (
 <td key={colIndex} className="px-2 py-2">
 <input
 type="text"
 value={row[key]}
 onChange={(e) => onChange(rowIndex, key, e.target.value)}
 className="w-full bg-transparent border-b border-transparent focus:border-blue-500
focus:outline-none py-1 px-2"
 placeholder={colIndex === 0 ? placeholder : "..."}
 />
 </td>
 ))}
 <td className="px-4 py-2 text-center">
 <button
 onClick={() => onRemove(row.id)}
 className="text-slate-400 hover:text-red-500 transition-colors"
 title="Remove Row"
 >
 <Trash2 size={16} />
 </button>
 </td>
 </tr> 
))}
 </tbody>
 </table>
 <button
 onClick={onAdd}
 className="mt-4 flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-800
transition-colors px-4 py-2"
 >
 <Plus size={16} />
 Add Entry
 </button>
 </div>
 );
};
export default function DigitalVaultApp() {
 // State for Section 2.1 (Banking)
 const [bankingData, setBankingData] = useState([
 { id: 1, institution: '', accountType: '', username: '', notes: '' }
 ]);
 // State for Section 3.1 (Crypto)
 const [cryptoData, setCryptoData] = useState([
 { id: 1, walletType: '', walletName: '', publicAddress: '', notes: '' }
 ]);
 // Handlers for Banking
 const addBankRow = () => {
 setBankingData([...bankingData, { id: Date.now(), institution: '', accountType: '', username: '', notes: '' }]); 
 };
 const removeBankRow = (id) => {
 setBankingData(bankingData.filter(row => row.id !== id));
 };
 const updateBankRow = (index, field, value) => {
 const newData = [...bankingData];
 newData[index][field] = value;
 setBankingData(newData);
 };
 // Handlers for Crypto
 const addCryptoRow = () => {
 setCryptoData([...cryptoData, { id: Date.now(), walletType: '', walletName: '', publicAddress: '', notes: ''
}]);
 };
 const removeCryptoRow = (id) => {
 setCryptoData(cryptoData.filter(row => row.id !== id));
 };
 const updateCryptoRow = (index, field, value) => {
 const newData = [...cryptoData];
 newData[index][field] = value;
 setCryptoData(newData);
 };
 return (
 <div className="max-w-5xl mx-auto p-8 font-sans text-slate-800 bg-slate-50 min-h-screen">

 {/* Header */}
 <div className="mb-12 text-center">
 <h1 className="text-4xl font-bold tracking-tight text-slate-900 mb-2">THE DIGITAL VAULT
BLUEPRINT</h1>
 <p className="text-slate-500">Legacy Grove Codex LLC © 2026</p>
 <div className="flex justify-center gap-4 mt-6">
 <span className="flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full textxs font-bold uppercase tracking-wide">
 <ShieldCheck size={14} /> Client-Side Encryption Active
 </span>
 </div>
 </div>
 {/* Section 2.1 Demo */}
 <VaultSection
 title="Section 2.1 — Banking & Financial Accounts"
 subtitle="List all institutions where assets are held. Add as many rows as required."
 >
 <DynamicTable
 headers={['Institution', 'Account Type', 'Username', 'Notes']}
 data={bankingData}
 onAdd={addBankRow}
 onRemove={removeBankRow}
 onChange={updateBankRow}
 placeholder="e.g. Chase Bank"
 />
 </VaultSection>
 {/* Section 3.1 Demo */}
 <VaultSection
 title="Section 3.1 — Crypto & Digital Assets" 
 subtitle="Wallet Registry. Public addresses only. Do not store private keys here."
 >
 <DynamicTable
 headers={['Wallet Type', 'Wallet Name', 'Public Address', 'Notes']}
 data={cryptoData}
 onAdd={addCryptoRow}
 onRemove={removeCryptoRow}
 onChange={updateCryptoRow}
 placeholder="e.g. Ledger Nano X"
 />
 </VaultSection>
 {/* Action Bar */}
 <div className="fixed bottom-0 left-0 w-full bg-white border-t border-slate-200 p-4 shadow-lg flex
justify-between items-center px-8">
 <p className="text-sm text-slate-400">Your data is stored locally in your browser.</p>
 <div className="flex gap-4">
 <button className="flex items-center gap-2 px-6 py-2 bg-slate-200 hover:bg-slate-300 text-slate800 rounded-lg font-medium transition-colors">
 <Save size={18} /> Save Progress (Local)
 </button>
 <button className="flex items-center gap-2 px-6 py-2 bg-slate-900 hover:bg-slate-800 text-white
rounded-lg font-medium transition-colors shadow-md">
 <Download size={18} /> Export PDF
 </button>
 </div>
 </div>
 </div>
 ); 
}
